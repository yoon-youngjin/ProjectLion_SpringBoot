## 10. ItemProcessor 

이번 챕터는 읽기와 쓰기가 아닌, 가공 단계입니다. 여기서 중요한 점은 ItemProcessor는 필수가 아니라는 점입니다.
ItemProcessor는 데이터를 가공하거나 필터링하는 역할을 합니다. 이는 Writer 부분에서도 충분히 구현이 가능합니다.

그럼에도 ItemProcessor를 쓰는 것은 Reader, Writer 와는 별도의 단계로 분리되었기 때문에 비즈니스 코드가 섞이는 것을 방지해주기 때문입니다. 

그래서 일반적으로 배치 어플리케이션에서 비즈니스 로직을 추가할때는 가장 먼저 Processor를 고려해보는게 좋습니다. 각 계층을 분리할 수 있는 좋은 방법입니다. 


### 10.1 ItemProcessor 소개 

ItemProcessor는 Reader에서 넘겨준 데이터 개별건을 가공/처리해줍니다. ChunkSize 단위로 묶은 데이터를 한 번에 처리하는 ItemWriter와는 대조됩니다. 

일반적으로 ItemProcessor를 사용하는 방법은 2가지입니다.
- 변환
  - Reader에서 읽은 데이터를 원하는 타입으로 변환해서 Writer에 넘겨줄 수 있습니다.
- 필터
  - Reader에서 넘겨준 데이터를 Writer로 넘겨줄 것인지를 결정할 수 있습니다. 
  - `null`을 반환하면 Writer에 전달되지 않습니다.

### 10.2 기본 사용법

ItemPrcessor 인터페이스는 두 개의 제네릭 타입이 필요합니다.

```java
public interface ItemProcess<I, O> {
    O Process(I item) throws Exception;
}
```
- I : ItemReader에서 받을 데이터 타입
- O : ItemWriter에 보낼 데이터 타입

ItemProcess에서 구현해야할 메서드는 `process()` 하나입니다. 따라서 람다식을 사용할 수 있습니다. 

```java
@Bean(BEAN_PREFIX + "processor")
@StepScope
public ItemProcessor<ReadType, WriteType> processor() {
    return item -> {
        item.convert();
        return item;
    };
}
```

### 10.3 변환

Reader에서 읽은 타입을 변환하여 Writer에 전달해주는 것을 의미합니다. 

