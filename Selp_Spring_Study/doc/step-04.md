## OneToOne 관계 설정 팁
-	주문과 쿠폰 엔티티가 있다.
-	주문 시 쿠폰을 적용해서 할인 받을 수 있다.
-	주문과 쿠폰 관계는 1:1 관계 즉 OneToOne 관계이다.

### 주의 할 내용

-	외래 키(FK)는 어디 테이블에 두는 것이 좋은가?
-	양방향 연관 관계 편의 메소드
-	제약 조건으로 인한 안정성 및 성능 향상

### 외래 키는 어디 테이블에 두는 것이 좋을까?
-	일대다 관계에서는 다 쪽에서 외래 키를 관리하게 되지만 상대적으로 일대일 관계 설정에는 외래 키를 어느 곳에 두어야 하는지를 생각해야 함
-	JPA 상에서는 외래 키가 갖는 쪽이 연관 관계 의 주인이 되고 연관 관계의 주인만이 데이터베이스 연관 관계와 매핑되고 외래 키를 관리(등록, 수정, 삭제)할 수 있음

#### Order가 주인일 경우 장점: INSERT SQL이 한번 실행

![image](https://user-images.githubusercontent.com/83503188/159864374-0323e6af-dbac-45f8-843a-a4598542f80a.png)

-	order 테이블에 coupon_id 칼럼을 저장하기 때문에 주문 SQL은 한 번만 실행
-	반면에 coupon이 연관 관계의 주인일 경우에는 coupon에 order의 외래 키가 있으니 order INSERT SQL 한 번, coupon 테이블에 order_id 칼럼 업데이트 쿼리 한번 총 2번의 쿼리가 실행
-	데이터 베이스 칼럼에 coupon_id 항목이 null이 아닌 경우 할인 쿠폰이 적용된 것으로 판단 가능

#### Order가 주인일 경우 단점: 연관 관계 변경 시 취약
-	기존 요구사항은 주문 한 개에 쿠폰은 한 개만 적용이 가능 했기 때문에 OneToOne 연관 관계를 맺었지만 하나의 주문에 여러 개의 쿠폰이 적용되는 기능이 추가되었을 때 변경하기 어렵다는 단점

### 연관 관계의 주인 설정
-	OneToOne 관계를 맺으면 외래 키를 어디에 둘 것인지, 즉 연관 관계의 주인을 어디에 둘 것인지는 많은 고민이 필요
-	OneToMany로 변경될 가능성이 있는지 판단하고 변경이 될 가능성이 있다고 판단되면 Many가 될 엔티티가 관계의 주인이 되는 것이 좋다고 봄
